#!/bin/bash

echo "üéØ T·∫†O 158 CH·ªà TI√äU KPI THEO BACKEND API"
echo "======================================="

API_BASE="http://localhost:5055/api"

# Function t·∫°o KPI indicator (kh√¥ng c·∫ßn Table navigation property)
create_indicator_api() {
    local table_id=$1
    local name=$2
    local max_score=$3
    local unit=$4
    local order_index=$5

    # X√°c ƒë·ªãnh value type t·ª´ unit
    local value_type=1  # NUMBER
    case "$unit" in
        "%") value_type=2 ;;
        "ƒêi·ªÉm") value_type=3 ;;
        "Tri·ªáu VND") value_type=4 ;;
        "Kh√°ch h√†ng") value_type=1 ;;
        "BT") value_type=1 ;;
        "c√°i") value_type=1 ;;
        *) value_type=1 ;;
    esac

    http_code=$(curl -s -w "%{http_code}" -o /dev/null -X POST "$API_BASE/KpiIndicators/CreateFromDto" \
        -H "Content-Type: application/json" \
        -d "{
            \"id\": 0,
            \"tableId\": $table_id,
            \"indicatorName\": \"$name\",
            \"maxScore\": $max_score,
            \"unit\": \"$unit\",
            \"orderIndex\": $order_index,
            \"valueType\": $value_type,
            \"isActive\": true
        }")

    if [[ "$http_code" == "201" ]]; then
        echo "      ‚úÖ $order_index. $name ($max_score ƒëi·ªÉm, $unit)"
        return 0
    else
        echo "      ‚ùå $order_index. $name - HTTP $http_code"
        return 1
    fi
}

echo ""
echo "üîß Ki·ªÉm tra k·∫øt n·ªëi API..."
response=$(curl -s -w "%{http_code}" "$API_BASE/KpiAssignmentTables")
if [[ "${response: -3}" == "200" ]]; then
    echo "‚úÖ API ƒë√£ s·∫µn s√†ng"
else
    echo "‚ùå API kh√¥ng ph·∫£n h·ªìi. ƒê·∫£m b·∫£o backend ƒëang ch·∫°y tr√™n localhost:5055"
    exit 1
fi

echo ""
echo "üóëÔ∏è  X√≥a t·∫•t c·∫£ KPI indicators c≈©..."
curl -s -X DELETE "$API_BASE/KpiIndicators/DeleteAll" > /dev/null

echo ""
echo "üîß T·∫°o 158 ch·ªâ ti√™u KPI theo danh s√°ch CH√çNH X√ÅC..."

# Bi·∫øn ƒë·∫øm th√†nh c√¥ng
success_count=0

# B·∫¢NG 1: TruongphongKhdn (ID: 1) - 8 ch·ªâ ti√™u
echo ""
echo "üìã 1. TruongphongKhdn (8 ch·ªâ ti√™u):"
create_indicator_api 1 "T·ªïng D∆∞ n·ª£ KHDN" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_indicator_api 1 "T·ª∑ l·ªá n·ª£ x·∫•u KHDN" 10 "%" 2 && ((success_count++))
create_indicator_api 1 "Thu n·ª£ ƒë√£ XLRR KHDN" 10 "Tri·ªáu VND" 3 && ((success_count++))
create_indicator_api 1 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 10 "Tri·ªáu VND" 4 && ((success_count++))
create_indicator_api 1 "Ph√°t tri·ªÉn Kh√°ch h√†ng Doanh nghi·ªáp" 10 "Kh√°ch h√†ng" 5 && ((success_count++))
create_indicator_api 1 "ƒêi·ªÅu h√†nh theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c" 20 "%" 6 && ((success_count++))
create_indicator_api 1 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•" 10 "%" 7 && ((success_count++))
create_indicator_api 1 "BQ k·∫øt qu·∫£ th·ª±c hi·ªán CB trong ph√≤ng m√¨nh ph·ª• tr√°ch" 10 "%" 8 && ((success_count++))

# B·∫¢NG 2: TruongphongKhcn (ID: 34) - 8 ch·ªâ ti√™u
echo ""
echo "üìã 2. TruongphongKhcn (8 ch·ªâ ti√™u):"
create_indicator_api 34 "T·ªïng D∆∞ n·ª£ KHCN" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_indicator_api 34 "T·ª∑ l·ªá n·ª£ x·∫•u KHCN" 10 "%" 2 && ((success_count++))
create_indicator_api 34 "Thu n·ª£ ƒë√£ XLRR KHCN" 10 "Tri·ªáu VND" 3 && ((success_count++))
create_indicator_api 34 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 10 "Tri·ªáu VND" 4 && ((success_count++))
create_indicator_api 34 "Ph√°t tri·ªÉn Kh√°ch h√†ng C√° nh√¢n" 10 "Kh√°ch h√†ng" 5 && ((success_count++))
create_indicator_api 34 "ƒêi·ªÅu h√†nh theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c" 20 "%" 6 && ((success_count++))
create_indicator_api 34 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•" 10 "%" 7 && ((success_count++))
create_indicator_api 34 "BQ k·∫øt qu·∫£ th·ª±c hi·ªán CB trong ph√≤ng m√¨nh ph·ª• tr√°ch" 10 "%" 8 && ((success_count++))

# B·∫¢NG 3: PhophongKhdn (ID: 35) - 8 ch·ªâ ti√™u
echo ""
echo "üìã 3. PhophongKhdn (8 ch·ªâ ti√™u):"
create_indicator_api 35 "T·ªïng D∆∞ n·ª£ KHDN" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_indicator_api 35 "T·ª∑ l·ªá n·ª£ x·∫•u KHDN" 10 "%" 2 && ((success_count++))
create_indicator_api 35 "Thu n·ª£ ƒë√£ XLRR KHDN" 10 "Tri·ªáu VND" 3 && ((success_count++))
create_indicator_api 35 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 10 "Tri·ªáu VND" 4 && ((success_count++))
create_indicator_api 35 "Ph√°t tri·ªÉn Kh√°ch h√†ng Doanh nghi·ªáp" 10 "Kh√°ch h√†ng" 5 && ((success_count++))
create_indicator_api 35 "ƒêi·ªÅu h√†nh theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c" 20 "%" 6 && ((success_count++))
create_indicator_api 35 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•" 10 "%" 7 && ((success_count++))
create_indicator_api 35 "BQ k·∫øt qu·∫£ th·ª±c hi·ªán CB trong ph√≤ng m√¨nh ph·ª• tr√°ch" 10 "%" 8 && ((success_count++))

# B·∫¢NG 4: PhophongKhcn (ID: 36) - 8 ch·ªâ ti√™u
echo ""
echo "üìã 4. PhophongKhcn (8 ch·ªâ ti√™u):"
create_indicator_api 36 "T·ªïng D∆∞ n·ª£ KHCN" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_indicator_api 36 "T·ª∑ l·ªá n·ª£ x·∫•u KHCN" 10 "%" 2 && ((success_count++))
create_indicator_api 36 "Thu n·ª£ ƒë√£ XLRR KHCN" 10 "Tri·ªáu VND" 3 && ((success_count++))
create_indicator_api 36 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 10 "Tri·ªáu VND" 4 && ((success_count++))
create_indicator_api 36 "Ph√°t tri·ªÉn Kh√°ch h√†ng C√° nh√¢n" 10 "Kh√°ch h√†ng" 5 && ((success_count++))
create_indicator_api 36 "ƒêi·ªÅu h√†nh theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c" 20 "%" 6 && ((success_count++))
create_indicator_api 36 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•" 10 "%" 7 && ((success_count++))
create_indicator_api 36 "BQ k·∫øt qu·∫£ th·ª±c hi·ªán CB trong ph√≤ng m√¨nh ph·ª• tr√°ch" 10 "%" 8 && ((success_count++))

# B·∫¢NG 5: TruongphongKhqlrr (ID: 37) - 6 ch·ªâ ti√™u
echo ""
echo "üìã 5. TruongphongKhqlrr (6 ch·ªâ ti√™u):"
create_indicator_api 37 "T·ªïng ngu·ªìn v·ªën" 10 "Tri·ªáu VND" 1 && ((success_count++))
create_indicator_api 37 "T·ªïng d∆∞ n·ª£" 10 "Tri·ªáu VND" 2 && ((success_count++))
create_indicator_api 37 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 10 "Tri·ªáu VND" 3 && ((success_count++))
create_indicator_api 37 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, ch·ª©c nƒÉng nhi·ªám v·ª• c·ªßa ph√≤ng" 50 "%" 4 && ((success_count++))
create_indicator_api 37 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 5 && ((success_count++))
create_indicator_api 37 "K·∫øt qu·∫£ th·ª±c hi·ªán BQ c·ªßa CB trong ph√≤ng" 10 "%" 6 && ((success_count++))

# B·∫¢NG 6: PhophongKhqlrr (ID: 38) - 6 ch·ªâ ti√™u
echo ""
echo "üìã 6. PhophongKhqlrr (6 ch·ªâ ti√™u):"
create_indicator_api 38 "T·ªïng ngu·ªìn v·ªën" 10 "Tri·ªáu VND" 1 && ((success_count++))
create_indicator_api 38 "T·ªïng d∆∞ n·ª£" 10 "Tri·ªáu VND" 2 && ((success_count++))
create_indicator_api 38 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 10 "Tri·ªáu VND" 3 && ((success_count++))
create_indicator_api 38 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, ch·ª©c nƒÉng nhi·ªám v·ª• c·ªßa ph√≤ng" 50 "%" 4 && ((success_count++))
create_indicator_api 38 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 5 && ((success_count++))
create_indicator_api 38 "K·∫øt qu·∫£ th·ª±c hi·ªán BQ c·ªßa CB trong ph√≤ng m√¨nh ph·ª• tr√°ch" 10 "%" 6 && ((success_count++))

# B·∫¢NG 7: Cbtd (ID: 39) - 8 ch·ªâ ti√™u
echo ""
echo "üìã 7. Cbtd (8 ch·ªâ ti√™u):"
create_indicator_api 39 "T·ªïng d∆∞ n·ª£ BQ" 30 "Tri·ªáu VND" 1 && ((success_count++))
create_indicator_api 39 "T·ª∑ l·ªá n·ª£ x·∫•u" 15 "%" 2 && ((success_count++))
create_indicator_api 39 "Ph√°t tri·ªÉn Kh√°ch h√†ng" 10 "Kh√°ch h√†ng" 3 && ((success_count++))
create_indicator_api 39 "Thu n·ª£ ƒë√£ XLRR (n·∫øu kh√¥ng c√≥ n·ª£ XLRR th√¨ c·ªông v√†o ch·ªâ ti√™u D∆∞ n·ª£)" 10 "Tri·ªáu VND" 4 && ((success_count++))
create_indicator_api 39 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c" 10 "%" 5 && ((success_count++))
create_indicator_api 39 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 6 && ((success_count++))
create_indicator_api 39 "T·ªïng ngu·ªìn v·ªën huy ƒë·ªông BQ" 10 "Tri·ªáu VND" 7 && ((success_count++))
create_indicator_api 39 "Ho√†n th√†nh ch·ªâ ti√™u giao kho√°n SPDV" 5 "%" 8 && ((success_count++))

# B·∫¢NG 8: TruongphongKtnqCnl1 (ID: 40) - 6 ch·ªâ ti√™u
echo ""
echo "üìã 8. TruongphongKtnqCnl1 (6 ch·ªâ ti√™u):"
create_indicator_api 40 "T·ªïng ngu·ªìn v·ªën" 10 "Tri·ªáu VND" 1 && ((success_count++))
create_indicator_api 40 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 20 "Tri·ªáu VND" 2 && ((success_count++))
create_indicator_api 40 "Thu d·ªãch v·ª• thanh to√°n trong n∆∞·ªõc" 10 "Tri·ªáu VND" 3 && ((success_count++))
create_indicator_api 40 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, ch·ª©c nƒÉng nhi·ªám v·ª• c·ªßa ph√≤ng" 40 "%" 4 && ((success_count++))
create_indicator_api 40 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 5 && ((success_count++))
create_indicator_api 40 "K·∫øt qu·∫£ th·ª±c hi·ªán BQ c·ªßa CB trong ph√≤ng" 10 "%" 6 && ((success_count++))

# B·∫¢NG 9: PhophongKtnqCnl1 (ID: 41) - 6 ch·ªâ ti√™u
echo ""
echo "üìã 9. PhophongKtnqCnl1 (6 ch·ªâ ti√™u):"
create_indicator_api 41 "T·ªïng ngu·ªìn v·ªën" 10 "Tri·ªáu VND" 1 && ((success_count++))
create_indicator_api 41 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 20 "Tri·ªáu VND" 2 && ((success_count++))
create_indicator_api 41 "Thu d·ªãch v·ª• thanh to√°n trong n∆∞·ªõc" 10 "Tri·ªáu VND" 3 && ((success_count++))
create_indicator_api 41 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, ch·ª©c nƒÉng nhi·ªám v·ª• c·ªßa ph√≤ng" 40 "%" 4 && ((success_count++))
create_indicator_api 41 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 5 && ((success_count++))
create_indicator_api 41 "K·∫øt qu·∫£ th·ª±c hi·ªán BQ c·ªßa CB thu·ªôc m√¨nh ph·ª• tr√°ch" 10 "%" 6 && ((success_count++))

# B·∫¢NG 10: Gdv (ID: 42) - 6 ch·ªâ ti√™u
echo ""
echo "üìã 10. Gdv (6 ch·ªâ ti√™u):"
create_indicator_api 42 "S·ªë b√∫t to√°n giao d·ªãch BQ" 50 "BT" 1 && ((success_count++))
create_indicator_api 42 "S·ªë b√∫t to√°n h·ªßy" 15 "BT" 2 && ((success_count++))
create_indicator_api 42 "Th·ª±c hi·ªán ch·ª©c nƒÉng, nhi·ªám v·ª• ƒë∆∞·ª£c giao" 10 "%" 3 && ((success_count++))
create_indicator_api 42 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 4 && ((success_count++))
create_indicator_api 42 "T·ªïng ngu·ªìn v·ªën huy ƒë·ªông BQ" 10 "Tri·ªáu VND" 5 && ((success_count++))
create_indicator_api 42 "Ho√†n th√†nh ch·ªâ ti√™u giao kho√°n SPDV" 5 "%" 6 && ((success_count++))

echo ""
echo "üìã 11. TqHkKtnb - ƒê·ª£i TP KTNQ/Gi√°m ƒë·ªëc CN lo·∫°i 2 tr·ª±c ti·∫øp giao sau (ch∆∞a c√≥ c·ª• th·ªÉ)"

# B·∫¢NG 12: TruongphoItThKtgs (ID: 44) - 5 ch·ªâ ti√™u
echo ""
echo "üìã 12. TruongphoItThKtgs (5 ch·ªâ ti√™u):"
create_indicator_api 44 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, c√°c c√¥ng vi·ªác theo ch·ª©c nƒÉng nhi·ªám v·ª• c·ªßa ph√≤ng" 65 "%" 1 && ((success_count++))
create_indicator_api 44 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 2 && ((success_count++))
create_indicator_api 44 "T·ªïng ngu·ªìn v·ªën huy ƒë·ªông BQ" 10 "Tri·ªáu VND" 3 && ((success_count++))
create_indicator_api 44 "Ho√†n th√†nh ch·ªâ ti√™u giao kho√°n SPDV" 5 "%" 4 && ((success_count++))
create_indicator_api 44 "K·∫øt qu·∫£ th·ª±c hi·ªán BQ c·ªßa c√°n b·ªô trong ph√≤ng" 10 "%" 5 && ((success_count++))

# B·∫¢NG 13: CBItThKtgsKhqlrr (ID: 45) - 4 ch·ªâ ti√™u
echo ""
echo "üìã 13. CBItThKtgsKhqlrr (4 ch·ªâ ti√™u):"
create_indicator_api 45 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, c√°c c√¥ng vi·ªác theo ch·ª©c nƒÉng nhi·ªám v·ª• ƒë∆∞·ª£c giao" 75 "%" 1 && ((success_count++))
create_indicator_api 45 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 2 && ((success_count++))
create_indicator_api 45 "T·ªïng ngu·ªìn v·ªën huy ƒë·ªông BQ" 10 "Tri·ªáu VND" 3 && ((success_count++))
create_indicator_api 45 "Ho√†n th√†nh ch·ªâ ti√™u giao kho√°n SPDV" 5 "%" 4 && ((success_count++))

# B·∫¢NG 14: GiamdocPgd (ID: 46) - 9 ch·ªâ ti√™u
echo ""
echo "üìã 14. GiamdocPgd (9 ch·ªâ ti√™u):"
create_indicator_api 46 "T·ªïng ngu·ªìn v·ªën BQ" 15 "Tri·ªáu VND" 1 && ((success_count++))
create_indicator_api 46 "T·ªïng d∆∞ n·ª£ BQ" 15 "Tri·ªáu VND" 2 && ((success_count++))
create_indicator_api 46 "T·ª∑ l·ªá n·ª£ x·∫•u" 10 "%" 3 && ((success_count++))
create_indicator_api 46 "Ph√°t tri·ªÉn Kh√°ch h√†ng" 10 "Kh√°ch h√†ng" 4 && ((success_count++))
create_indicator_api 46 "Thu n·ª£ ƒë√£ XLRR (n·∫øu kh√¥ng c√≥ th√¨ c·ªông v√†o ch·ªâ ti√™u d∆∞ n·ª£)" 5 "Tri·ªáu VND" 5 && ((success_count++))
create_indicator_api 46 "Thu d·ªãch v·ª•" 10 "Tri·ªáu VND" 6 && ((success_count++))
create_indicator_api 46 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 15 "Tri·ªáu VND" 7 && ((success_count++))
create_indicator_api 46 "ƒêi·ªÅu h√†nh theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 8 && ((success_count++))
create_indicator_api 46 "BQ k·∫øt qu·∫£ th·ª±c hi·ªán c·ªßa CB trong ph√≤ng" 10 "%" 9 && ((success_count++))

# B·∫¢NG 15: PhogiamdocPgd (ID: 47) - 9 ch·ªâ ti√™u
echo ""
echo "üìã 15. PhogiamdocPgd (9 ch·ªâ ti√™u):"
create_indicator_api 47 "T·ªïng ngu·ªìn v·ªën BQ" 15 "Tri·ªáu VND" 1 && ((success_count++))
create_indicator_api 47 "T·ªïng d∆∞ n·ª£ BQ" 15 "Tri·ªáu VND" 2 && ((success_count++))
create_indicator_api 47 "T·ª∑ l·ªá n·ª£ x·∫•u" 10 "%" 3 && ((success_count++))
create_indicator_api 47 "Ph√°t tri·ªÉn Kh√°ch h√†ng" 10 "Kh√°ch h√†ng" 4 && ((success_count++))
create_indicator_api 47 "Thu n·ª£ ƒë√£ XLRR (n·∫øu kh√¥ng c√≥ th√¨ c·ªông v√†o ch·ªâ ti√™u d∆∞ n·ª£)" 5 "Tri·ªáu VND" 5 && ((success_count++))
create_indicator_api 47 "Thu d·ªãch v·ª•" 10 "Tri·ªáu VND" 6 && ((success_count++))
create_indicator_api 47 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 15 "Tri·ªáu VND" 7 && ((success_count++))
create_indicator_api 47 "ƒêi·ªÅu h√†nh theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 8 && ((success_count++))
create_indicator_api 47 "BQ k·∫øt qu·∫£ th·ª±c hi·ªán c·ªßa CB trong ph√≤ng" 10 "%" 9 && ((success_count++))

# B·∫¢NG 16: PhogiamdocPgdCbtd (ID: 48) - 8 ch·ªâ ti√™u
echo ""
echo "üìã 16. PhogiamdocPgdCbtd (8 ch·ªâ ti√™u):"
create_indicator_api 48 "T·ªïng d∆∞ n·ª£ BQ" 30 "Tri·ªáu VND" 1 && ((success_count++))
create_indicator_api 48 "T·ª∑ l·ªá n·ª£ x·∫•u" 15 "%" 2 && ((success_count++))
create_indicator_api 48 "Ph√°t tri·ªÉn Kh√°ch h√†ng" 10 "Kh√°ch h√†ng" 3 && ((success_count++))
create_indicator_api 48 "Thu n·ª£ ƒë√£ XLRR (n·∫øu kh√¥ng c√≥ th√¨ c·ªông v√†o ch·ªâ ti√™u d∆∞ n·ª£)" 10 "Tri·ªáu VND" 4 && ((success_count++))
create_indicator_api 48 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c" 10 "%" 5 && ((success_count++))
create_indicator_api 48 "T·ªïng ngu·ªìn v·ªën huy ƒë·ªông BQ" 10 "Tri·ªáu VND" 6 && ((success_count++))
create_indicator_api 48 "Ho√†n th√†nh ch·ªâ ti√™u giao kho√°n SPDV" 5 "%" 7 && ((success_count++))
create_indicator_api 48 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 8 && ((success_count++))

# B·∫¢NG 17: GiamdocCnl2 (ID: 49) - 11 ch·ªâ ti√™u
echo ""
echo "üìã 17. GiamdocCnl2 (11 ch·ªâ ti√™u):"
create_indicator_api 49 "T·ªïng ngu·ªìn v·ªën cu·ªëi k·ª≥" 5 "Tri·ªáu VND" 1 && ((success_count++))
create_indicator_api 49 "T·ªïng ngu·ªìn v·ªën huy ƒë·ªông BQ trong k·ª≥" 10 "Tri·ªáu VND" 2 && ((success_count++))
create_indicator_api 49 "T·ªïng d∆∞ n·ª£ cu·ªëi k·ª≥" 5 "Tri·ªáu VND" 3 && ((success_count++))
create_indicator_api 49 "T·ªïng d∆∞ n·ª£ BQ trong k·ª≥" 10 "Tri·ªáu VND" 4 && ((success_count++))
create_indicator_api 49 "T·ªïng d∆∞ n·ª£ HSX&CN" 5 "Tri·ªáu VND" 5 && ((success_count++))
create_indicator_api 49 "T·ª∑ l·ªá n·ª£ x·∫•u n·ªôi b·∫£ng" 10 "%" 6 && ((success_count++))
create_indicator_api 49 "Thu n·ª£ ƒë√£ XLRR" 5 "Tri·ªáu VND" 7 && ((success_count++))
create_indicator_api 49 "Ph√°t tri·ªÉn Kh√°ch h√†ng" 10 "Kh√°ch h√†ng" 8 && ((success_count++))
create_indicator_api 49 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 20 "Tri·ªáu VND" 9 && ((success_count++))
create_indicator_api 49 "Thu d·ªãch v·ª•" 10 "Tri·ªáu VND" 10 && ((success_count++))
create_indicator_api 49 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, n·ªôi dung ch·ªâ ƒë·∫°o, ƒëi·ªÅu h√†nh c·ªßa CNL1, vƒÉn h√≥a Agribank" 10 "%" 11 && ((success_count++))

# B·∫¢NG 18: PhogiamdocCnl2Td (ID: 50) - 8 ch·ªâ ti√™u
echo ""
echo "üìã 18. PhogiamdocCnl2Td (8 ch·ªâ ti√™u):"
create_indicator_api 50 "T·ªïng d∆∞ n·ª£ cho vay" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_indicator_api 50 "T·ªïng d∆∞ n·ª£ cho vay HSX&CN" 10 "Tri·ªáu VND" 2 && ((success_count++))
create_indicator_api 50 "Thu n·ª£ ƒë√£ x·ª≠ l√Ω" 10 "Tri·ªáu VND" 3 && ((success_count++))
create_indicator_api 50 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 20 "Tri·ªáu VND" 4 && ((success_count++))
create_indicator_api 50 "T·ª∑ l·ªá n·ª£ x·∫•u" 10 "%" 5 && ((success_count++))
create_indicator_api 50 "Ph√°t tri·ªÉn Kh√°ch h√†ng" 10 "Kh√°ch h√†ng" 6 && ((success_count++))
create_indicator_api 50 "ƒêi·ªÅu h√†nh theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, nhi·ªám v·ª• ƒë∆∞·ª£c giao" 10 "%" 7 && ((success_count++))
create_indicator_api 50 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 8 && ((success_count++))

# B·∫¢NG 19: PhogiamdocCnl2Kt (ID: 51) - 6 ch·ªâ ti√™u
echo ""
echo "üìã 19. PhogiamdocCnl2Kt (6 ch·ªâ ti√™u):"
create_indicator_api 51 "T·ªïng ngu·ªìn v·ªën" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_indicator_api 51 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 30 "Tri·ªáu VND" 2 && ((success_count++))
create_indicator_api 51 "T·ªïng doanh thu ph√≠ d·ªãch v·ª•" 20 "Tri·ªáu VND" 3 && ((success_count++))
create_indicator_api 51 "S·ªë th·∫ª ph√°t h√†nh" 10 "c√°i" 4 && ((success_count++))
create_indicator_api 51 "ƒêi·ªÅu h√†nh theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, nhi·ªám v·ª• ƒë∆∞·ª£c giao" 10 "%" 5 && ((success_count++))
create_indicator_api 51 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 6 && ((success_count++))

# B·∫¢NG 20: TruongphongKhCnl2 (ID: 52) - 9 ch·ªâ ti√™u
echo ""
echo "üìã 20. TruongphongKhCnl2 (9 ch·ªâ ti√™u):"
create_indicator_api 52 "T·ªïng d∆∞ n·ª£" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_indicator_api 52 "T·ª∑ l·ªá n·ª£ x·∫•u" 15 "%" 2 && ((success_count++))
create_indicator_api 52 "Ph√°t tri·ªÉn Kh√°ch h√†ng" 10 "Kh√°ch h√†ng" 3 && ((success_count++))
create_indicator_api 52 "Thu n·ª£ ƒë√£ XLRR" 10 "Tri·ªáu VND" 4 && ((success_count++))
create_indicator_api 52 "ƒêi·ªÅu h√†nh theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c" 10 "%" 5 && ((success_count++))
create_indicator_api 52 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 6 && ((success_count++))
create_indicator_api 52 "T·ªïng ngu·ªìn v·ªën huy ƒë·ªông BQ" 10 "Tri·ªáu VND" 7 && ((success_count++))
create_indicator_api 52 "Ho√†n th√†nh ch·ªâ ti√™u giao kho√°n SPDV" 5 "%" 8 && ((success_count++))
create_indicator_api 52 "K·∫øt qu·∫£ th·ª±c hi·ªán BQ c·ªßa CB trong ph√≤ng" 10 "%" 9 && ((success_count++))

# B·∫¢NG 21: PhophongKhCnl2 (ID: 53) - 8 ch·ªâ ti√™u
echo ""
echo "üìã 21. PhophongKhCnl2 (8 ch·ªâ ti√™u):"
create_indicator_api 53 "T·ªïng d∆∞ n·ª£ BQ" 30 "Tri·ªáu VND" 1 && ((success_count++))
create_indicator_api 53 "T·ª∑ l·ªá n·ª£ x·∫•u" 15 "%" 2 && ((success_count++))
create_indicator_api 53 "Ph√°t tri·ªÉn Kh√°ch h√†ng" 10 "Kh√°ch h√†ng" 3 && ((success_count++))
create_indicator_api 53 "Thu n·ª£ ƒë√£ XLRR" 10 "Tri·ªáu VND" 4 && ((success_count++))
create_indicator_api 53 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c" 10 "%" 5 && ((success_count++))
create_indicator_api 53 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 6 && ((success_count++))
create_indicator_api 53 "T·ªïng ngu·ªìn v·ªën huy ƒë·ªông BQ" 10 "Tri·ªáu VND" 7 && ((success_count++))
create_indicator_api 53 "Ho√†n th√†nh ch·ªâ ti√™u giao kho√°n SPDV" 5 "%" 8 && ((success_count++))

# B·∫¢NG 22: TruongphongKtnqCnl2 (ID: 54) - 6 ch·ªâ ti√™u
echo ""
echo "üìã 22. TruongphongKtnqCnl2 (6 ch·ªâ ti√™u):"
create_indicator_api 54 "T·ªïng ngu·ªìn v·ªën" 10 "Tri·ªáu VND" 1 && ((success_count++))
create_indicator_api 54 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 20 "Tri·ªáu VND" 2 && ((success_count++))
create_indicator_api 54 "Thu d·ªãch v·ª• thanh to√°n trong n∆∞·ªõc" 10 "Tri·ªáu VND" 3 && ((success_count++))
create_indicator_api 54 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, c√°c c√¥ng vi·ªác theo ch·ª©c nƒÉng nhi·ªám v·ª• c·ªßa ph√≤ng" 40 "%" 4 && ((success_count++))
create_indicator_api 54 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 5 && ((success_count++))
create_indicator_api 54 "K·∫øt qu·∫£ th·ª±c hi·ªán BQ c·ªßa CB trong ph√≤ng" 10 "%" 6 && ((success_count++))

# B·∫¢NG 23: PhophongKtnqCnl2 (ID: 55) - 5 ch·ªâ ti√™u
echo ""
echo "üìã 23. PhophongKtnqCnl2 (5 ch·ªâ ti√™u):"
create_indicator_api 55 "S·ªë b√∫t to√°n giao d·ªãch BQ" 40 "BT" 1 && ((success_count++))
create_indicator_api 55 "S·ªë b√∫t to√°n h·ªßy" 20 "BT" 2 && ((success_count++))
create_indicator_api 55 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c" 25 "%" 3 && ((success_count++))
create_indicator_api 55 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 4 && ((success_count++))
create_indicator_api 55 "Ho√†n th√†nh ch·ªâ ti√™u giao kho√°n SPDV" 5 "%" 5 && ((success_count++))

echo ""
echo "‚úÖ HO√ÄN TH√ÄNH T·∫†O KPI INDICATORS!"
echo "================================="

# Ki·ªÉm tra k·∫øt qu·∫£
echo ""
echo "üîç Ki·ªÉm tra k·∫øt qu·∫£..."
total_count=$(curl -s "$API_BASE/KpiIndicators" | jq length 2>/dev/null || echo "0")

echo "üìä T·ªïng s·ªë KPI Indicators: $total_count/158"
echo "üéØ S·ªë th√†nh c√¥ng: $success_count/158"

if [ "$total_count" -eq 158 ]; then
    echo "üéâ ƒê√É T·∫†O ƒê·ª¶ 158 CH·ªà TI√äU KPI!"
elif [ "$success_count" -eq 158 ]; then
    echo "üéâ T·∫†O TH√ÄNH C√îNG 158 CH·ªà TI√äU KPI!"
else
    echo "‚ö†Ô∏è  Ch·ªâ t·∫°o ƒë∆∞·ª£c $success_count/158 ch·ªâ ti√™u. API tr·∫£ v·ªÅ: $total_count/158"
fi

echo ""
echo "üéØ PH√ÇN B·ªê THEO B·∫¢NG KPI (CH√çNH X√ÅC):"
echo "====================================="
echo "1. TruongphongKhdn: 8 ch·ªâ ti√™u"
echo "2. TruongphongKhcn: 8 ch·ªâ ti√™u"
echo "3. PhophongKhdn: 8 ch·ªâ ti√™u"
echo "4. PhophongKhcn: 8 ch·ªâ ti√™u"
echo "5. TruongphongKhqlrr: 6 ch·ªâ ti√™u"
echo "6. PhophongKhqlrr: 6 ch·ªâ ti√™u"
echo "7. Cbtd: 8 ch·ªâ ti√™u"
echo "8. TruongphongKtnqCnl1: 6 ch·ªâ ti√™u"
echo "9. PhophongKtnqCnl1: 6 ch·ªâ ti√™u"
echo "10. Gdv: 6 ch·ªâ ti√™u"
echo "11. TqHkKtnb: 0 ch·ªâ ti√™u (ƒë·ª£i giao sau)"
echo "12. TruongphoItThKtgs: 5 ch·ªâ ti√™u"
echo "13. CBItThKtgsKhqlrr: 4 ch·ªâ ti√™u"
echo "14. GiamdocPgd: 9 ch·ªâ ti√™u"
echo "15. PhogiamdocPgd: 9 ch·ªâ ti√™u"
echo "16. PhogiamdocPgdCbtd: 8 ch·ªâ ti√™u"
echo "17. GiamdocCnl2: 11 ch·ªâ ti√™u"
echo "18. PhogiamdocCnl2Td: 8 ch·ªâ ti√™u"
echo "19. PhogiamdocCnl2Kt: 6 ch·ªâ ti√™u"
echo "20. TruongphongKhCnl2: 9 ch·ªâ ti√™u"
echo "21. PhophongKhCnl2: 8 ch·ªâ ti√™u"
echo "22. TruongphongKtnqCnl2: 6 ch·ªâ ti√™u"
echo "23. PhophongKtnqCnl2: 5 ch·ªâ ti√™u"
echo "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"
echo "T·ªîNG: 158 ch·ªâ ti√™u cho 23 b·∫£ng c√°n b·ªô ‚úÖ"
echo "(Ghi ch√∫: TqHkKtnb ch∆∞a c√≥ ch·ªâ ti√™u c·ª• th·ªÉ)"

echo ""
echo "üöÄ C√ÅC B∆Ø·ªöC TI·∫æP THEO:"
echo "====================="
echo "1. ‚úÖ Ki·ªÉm tra frontend dropdown hi·ªÉn th·ªã ƒë√∫ng t√™n b·∫£ng KPI"
echo "2. üîÑ T·∫°o Employee KPI Assignments"
echo "3. üîÑ T·∫°o Unit KPI Scorings cho chi nh√°nh"
echo "4. üîÑ Import d·ªØ li·ªáu CSV cho 8 b·∫£ng core"
echo "5. üîÑ T·∫°o th√™m roles/units n·∫øu c·∫ßn"
