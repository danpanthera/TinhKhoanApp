#!/bin/bash

echo "üéØ T·∫†O HO√ÄN CH·ªàNH 158 CH·ªà TI√äU KPI CHO 23 B·∫¢NG C√ÅN B·ªò"
echo "===================================================="

API_BASE="http://localhost:5055/api"

# Function t·∫°o KPI indicator
create_kpi() {
    local table_id=$1
    local name=$2
    local max_score=$3
    local unit=$4
    local order_index=$5

    # X√°c ƒë·ªãnh value type t·ª´ unit
    local value_type=1  # NUMBER
    case "$unit" in
        "%") value_type=2 ;;         # PERCENTAGE
        "ƒêi·ªÉm") value_type=3 ;;      # POINTS
        "Tri·ªáu VND") value_type=4 ;; # CURRENCY
        *) value_type=1 ;;           # NUMBER
    esac

    http_code=$(curl -s -w "%{http_code}" -o /dev/null -X POST "$API_BASE/KpiIndicators/CreateFromDto" \
        -H "Content-Type: application/json" \
        -d "{
            \"tableId\": $table_id,
            \"indicatorName\": \"$name\",
            \"maxScore\": $max_score,
            \"unit\": \"$unit\",
            \"orderIndex\": $order_index,
            \"valueType\": $value_type,
            \"isActive\": true
        }")

    if [[ "$http_code" == "201" ]]; then
        echo "      ‚úÖ $order_index. $name ($max_score ƒëi·ªÉm, $unit)"
        return 0
    else
        echo "      ‚ùå $order_index. $name - HTTP $http_code"
        return 1
    fi
}

# Ki·ªÉm tra API
echo "üîß Ki·ªÉm tra k·∫øt n·ªëi API..."
response=$(curl -s -w "%{http_code}" "$API_BASE/KpiAssignmentTables")
if [[ "${response: -3}" == "200" ]]; then
    echo "‚úÖ API ƒë√£ s·∫µn s√†ng"
else
    echo "‚ùå API kh√¥ng ph·∫£n h·ªìi. ƒê·∫£m b·∫£o backend ƒëang ch·∫°y tr√™n localhost:5055"
    exit 1
fi

# X√≥a t·∫•t c·∫£ KPI indicators c≈©
echo ""
echo "üóëÔ∏è  X√≥a t·∫•t c·∫£ KPI indicators c≈©..."
curl -s -X DELETE "$API_BASE/KpiIndicators/DeleteAll" > /dev/null

success_count=0

# B·∫¢NG 1: TruongphongKhdn (ID: 1) - 8 ch·ªâ ti√™u
echo ""
echo "üìã 1. TruongphongKhdn (8 ch·ªâ ti√™u):"
create_kpi 1 "T·ªïng D∆∞ n·ª£ KHDN" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_kpi 1 "T·ª∑ l·ªá n·ª£ x·∫•u KHDN" 10 "%" 2 && ((success_count++))
create_kpi 1 "Thu n·ª£ ƒë√£ XLRR KHDN" 10 "Tri·ªáu VND" 3 && ((success_count++))
create_kpi 1 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 10 "Tri·ªáu VND" 4 && ((success_count++))
create_kpi 1 "Ph√°t tri·ªÉn Kh√°ch h√†ng Doanh nghi·ªáp" 10 "Kh√°ch h√†ng" 5 && ((success_count++))
create_kpi 1 "ƒêi·ªÅu h√†nh theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c" 20 "%" 6 && ((success_count++))
create_kpi 1 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•" 10 "%" 7 && ((success_count++))
create_kpi 1 "BQ k·∫øt qu·∫£ th·ª±c hi·ªán CB trong ph√≤ng m√¨nh ph·ª• tr√°ch" 10 "%" 8 && ((success_count++))

# B·∫¢NG 2: TruongphongKhcn (ID: 2) - 8 ch·ªâ ti√™u
echo ""
echo "üìã 2. TruongphongKhcn (8 ch·ªâ ti√™u):"
create_kpi 2 "T·ªïng D∆∞ n·ª£ KHCN" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_kpi 2 "T·ª∑ l·ªá n·ª£ x·∫•u KHCN" 10 "%" 2 && ((success_count++))
create_kpi 2 "Thu n·ª£ ƒë√£ XLRR KHCN" 10 "Tri·ªáu VND" 3 && ((success_count++))
create_kpi 2 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 10 "Tri·ªáu VND" 4 && ((success_count++))
create_kpi 2 "Ph√°t tri·ªÉn Kh√°ch h√†ng C√° nh√¢n" 10 "Kh√°ch h√†ng" 5 && ((success_count++))
create_kpi 2 "ƒêi·ªÅu h√†nh theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c" 20 "%" 6 && ((success_count++))
create_kpi 2 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•" 10 "%" 7 && ((success_count++))
create_kpi 2 "BQ k·∫øt qu·∫£ th·ª±c hi·ªán CB trong ph√≤ng m√¨nh ph·ª• tr√°ch" 10 "%" 8 && ((success_count++))

# B·∫¢NG 3: PhophongKhdn (ID: 3) - 8 ch·ªâ ti√™u
echo ""
echo "üìã 3. PhophongKhdn (8 ch·ªâ ti√™u):"
create_kpi 3 "T·ªïng D∆∞ n·ª£ KHDN" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_kpi 3 "T·ª∑ l·ªá n·ª£ x·∫•u KHDN" 10 "%" 2 && ((success_count++))
create_kpi 3 "Thu n·ª£ ƒë√£ XLRR KHDN" 10 "Tri·ªáu VND" 3 && ((success_count++))
create_kpi 3 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 10 "Tri·ªáu VND" 4 && ((success_count++))
create_kpi 3 "Ph√°t tri·ªÉn Kh√°ch h√†ng Doanh nghi·ªáp" 10 "Kh√°ch h√†ng" 5 && ((success_count++))
create_kpi 3 "ƒêi·ªÅu h√†nh theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c" 20 "%" 6 && ((success_count++))
create_kpi 3 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•" 10 "%" 7 && ((success_count++))
create_kpi 3 "BQ k·∫øt qu·∫£ th·ª±c hi·ªán CB trong ph√≤ng m√¨nh ph·ª• tr√°ch" 10 "%" 8 && ((success_count++))

# B·∫¢NG 4: PhophongKhcn (ID: 4) - 8 ch·ªâ ti√™u
echo ""
echo "üìã 4. PhophongKhcn (8 ch·ªâ ti√™u):"
create_kpi 4 "T·ªïng D∆∞ n·ª£ KHCN" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_kpi 4 "T·ª∑ l·ªá n·ª£ x·∫•u KHCN" 10 "%" 2 && ((success_count++))
create_kpi 4 "Thu n·ª£ ƒë√£ XLRR KHCN" 10 "Tri·ªáu VND" 3 && ((success_count++))
create_kpi 4 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 10 "Tri·ªáu VND" 4 && ((success_count++))
create_kpi 4 "Ph√°t tri·ªÉn Kh√°ch h√†ng C√° nh√¢n" 10 "Kh√°ch h√†ng" 5 && ((success_count++))
create_kpi 4 "ƒêi·ªÅu h√†nh theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c" 20 "%" 6 && ((success_count++))
create_kpi 4 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•" 10 "%" 7 && ((success_count++))
create_kpi 4 "BQ k·∫øt qu·∫£ th·ª±c hi·ªán CB trong ph√≤ng m√¨nh ph·ª• tr√°ch" 10 "%" 8 && ((success_count++))

# B·∫¢NG 5: TruongphongKhqlrr (ID: 5) - 6 ch·ªâ ti√™u
echo ""
echo "üìã 5. TruongphongKhqlrr (6 ch·ªâ ti√™u):"
create_kpi 5 "T·ªïng ngu·ªìn v·ªën" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_kpi 5 "T·ªïng d∆∞ n·ª£" 20 "Tri·ªáu VND" 2 && ((success_count++))
create_kpi 5 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 15 "Tri·ªáu VND" 3 && ((success_count++))
create_kpi 5 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, ch·ª©c nƒÉng nhi·ªám v·ª• c·ªßa ph√≤ng" 20 "%" 4 && ((success_count++))
create_kpi 5 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 15 "%" 5 && ((success_count++))
create_kpi 5 "K·∫øt qu·∫£ th·ª±c hi·ªán BQ c·ªßa CB trong ph√≤ng" 10 "%" 6 && ((success_count++))

# B·∫¢NG 6: PhophongKhqlrr (ID: 6) - 6 ch·ªâ ti√™u
echo ""
echo "üìã 6. PhophongKhqlrr (6 ch·ªâ ti√™u):"
create_kpi 6 "T·ªïng ngu·ªìn v·ªën" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_kpi 6 "T·ªïng d∆∞ n·ª£" 20 "Tri·ªáu VND" 2 && ((success_count++))
create_kpi 6 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 15 "Tri·ªáu VND" 3 && ((success_count++))
create_kpi 6 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, ch·ª©c nƒÉng nhi·ªám v·ª• c·ªßa ph√≤ng" 20 "%" 4 && ((success_count++))
create_kpi 6 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 15 "%" 5 && ((success_count++))
create_kpi 6 "K·∫øt qu·∫£ th·ª±c hi·ªán BQ c·ªßa CB trong ph√≤ng m√¨nh ph·ª• tr√°ch" 10 "%" 6 && ((success_count++))

# B·∫¢NG 7: Cbtd (ID: 7) - 8 ch·ªâ ti√™u
echo ""
echo "üìã 7. Cbtd (8 ch·ªâ ti√™u):"
create_kpi 7 "T·ªïng d∆∞ n·ª£ BQ" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_kpi 7 "T·ª∑ l·ªá n·ª£ x·∫•u" 10 "%" 2 && ((success_count++))
create_kpi 7 "Ph√°t tri·ªÉn Kh√°ch h√†ng" 10 "Kh√°ch h√†ng" 3 && ((success_count++))
create_kpi 7 "Thu n·ª£ ƒë√£ XLRR (n·∫øu kh√¥ng c√≥ n·ª£ XLRR th√¨ c·ªông v√†o ch·ªâ ti√™u D∆∞ n·ª£)" 10 "Tri·ªáu VND" 4 && ((success_count++))
create_kpi 7 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c" 20 "%" 5 && ((success_count++))
create_kpi 7 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 6 && ((success_count++))
create_kpi 7 "T·ªïng ngu·ªìn v·ªën huy ƒë·ªông BQ" 10 "Tri·ªáu VND" 7 && ((success_count++))
create_kpi 7 "Ho√†n th√†nh ch·ªâ ti√™u giao kho√°n SPDV" 10 "%" 8 && ((success_count++))

# B·∫¢NG 8: TruongphongKtnqCnl1 (ID: 8) - 6 ch·ªâ ti√™u
echo ""
echo "üìã 8. TruongphongKtnqCnl1 (6 ch·ªâ ti√™u):"
create_kpi 8 "T·ªïng ngu·ªìn v·ªën" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_kpi 8 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 20 "Tri·ªáu VND" 2 && ((success_count++))
create_kpi 8 "Thu d·ªãch v·ª• thanh to√°n trong n∆∞·ªõc" 15 "Tri·ªáu VND" 3 && ((success_count++))
create_kpi 8 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, ch·ª©c nƒÉng nhi·ªám v·ª• c·ªßa ph√≤ng" 20 "%" 4 && ((success_count++))
create_kpi 8 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 15 "%" 5 && ((success_count++))
create_kpi 8 "K·∫øt qu·∫£ th·ª±c hi·ªán BQ c·ªßa CB trong ph√≤ng" 10 "%" 6 && ((success_count++))

# B·∫¢NG 9: PhophongKtnqCnl1 (ID: 9) - 6 ch·ªâ ti√™u
echo ""
echo "üìã 9. PhophongKtnqCnl1 (6 ch·ªâ ti√™u):"
create_kpi 9 "T·ªïng ngu·ªìn v·ªën" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_kpi 9 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 20 "Tri·ªáu VND" 2 && ((success_count++))
create_kpi 9 "Thu d·ªãch v·ª• thanh to√°n trong n∆∞·ªõc" 15 "Tri·ªáu VND" 3 && ((success_count++))
create_kpi 9 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, ch·ª©c nƒÉng nhi·ªám v·ª• c·ªßa ph√≤ng" 20 "%" 4 && ((success_count++))
create_kpi 9 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 15 "%" 5 && ((success_count++))
create_kpi 9 "K·∫øt qu·∫£ th·ª±c hi·ªán BQ c·ªßa CB thu·ªôc m√¨nh ph·ª• tr√°ch" 10 "%" 6 && ((success_count++))

# B·∫¢NG 10: Gdv (ID: 10) - 6 ch·ªâ ti√™u
echo ""
echo "üìã 10. Gdv (6 ch·ªâ ti√™u):"
create_kpi 10 "S·ªë b√∫t to√°n giao d·ªãch BQ" 20 "BT" 1 && ((success_count++))
create_kpi 10 "S·ªë b√∫t to√°n h·ªßy" 10 "BT" 2 && ((success_count++))
create_kpi 10 "Th·ª±c hi·ªán ch·ª©c nƒÉng, nhi·ªám v·ª• ƒë∆∞·ª£c giao" 25 "%" 3 && ((success_count++))
create_kpi 10 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 15 "%" 4 && ((success_count++))
create_kpi 10 "T·ªïng ngu·ªìn v·ªën huy ƒë·ªông BQ" 15 "Tri·ªáu VND" 5 && ((success_count++))
create_kpi 10 "Ho√†n th√†nh ch·ªâ ti√™u giao kho√°n SPDV" 15 "%" 6 && ((success_count++))

# B·∫¢NG 11: TqHkKtnb (ID: 11) - Skip (ƒë·ª£i giao sau)
echo ""
echo "üìã 11. TqHkKtnb - ‚è≥ ƒê·ª£i TP KTNQ/Gi√°m ƒë·ªëc CN lo·∫°i 2 tr·ª±c ti·∫øp giao sau"

# B·∫¢NG 12: TruongphoItThKtgs (ID: 12) - 5 ch·ªâ ti√™u
echo ""
echo "üìã 12. TruongphoItThKtgs (5 ch·ªâ ti√™u):"
create_kpi 12 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, c√°c c√¥ng vi·ªác theo ch·ª©c nƒÉng nhi·ªám v·ª• c·ªßa ph√≤ng" 30 "%" 1 && ((success_count++))
create_kpi 12 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 20 "%" 2 && ((success_count++))
create_kpi 12 "T·ªïng ngu·ªìn v·ªën huy ƒë·ªông BQ" 20 "Tri·ªáu VND" 3 && ((success_count++))
create_kpi 12 "Ho√†n th√†nh ch·ªâ ti√™u giao kho√°n SPDV" 20 "%" 4 && ((success_count++))
create_kpi 12 "K·∫øt qu·∫£ th·ª±c hi·ªán BQ c·ªßa c√°n b·ªô trong ph√≤ng" 10 "%" 5 && ((success_count++))

# B·∫¢NG 13: CBItThKtgsKhqlrr (ID: 13) - 4 ch·ªâ ti√™u
echo ""
echo "üìã 13. CBItThKtgsKhqlrr (4 ch·ªâ ti√™u):"
create_kpi 13 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, c√°c c√¥ng vi·ªác theo ch·ª©c nƒÉng nhi·ªám v·ª• ƒë∆∞·ª£c giao" 40 "%" 1 && ((success_count++))
create_kpi 13 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 25 "%" 2 && ((success_count++))
create_kpi 13 "T·ªïng ngu·ªìn v·ªën huy ƒë·ªông BQ" 20 "Tri·ªáu VND" 3 && ((success_count++))
create_kpi 13 "Ho√†n th√†nh ch·ªâ ti√™u giao kho√°n SPDV" 15 "%" 4 && ((success_count++))

# B·∫¢NG 14: GiamdocPgd (ID: 14) - 9 ch·ªâ ti√™u
echo ""
echo "üìã 14. GiamdocPgd (9 ch·ªâ ti√™u):"
create_kpi 14 "T·ªïng ngu·ªìn v·ªën BQ" 15 "Tri·ªáu VND" 1 && ((success_count++))
create_kpi 14 "T·ªïng d∆∞ n·ª£ BQ" 15 "Tri·ªáu VND" 2 && ((success_count++))
create_kpi 14 "T·ª∑ l·ªá n·ª£ x·∫•u" 10 "%" 3 && ((success_count++))
create_kpi 14 "Ph√°t tri·ªÉn Kh√°ch h√†ng" 10 "Kh√°ch h√†ng" 4 && ((success_count++))
create_kpi 14 "Thu n·ª£ ƒë√£ XLRR (n·∫øu kh√¥ng c√≥ th√¨ c·ªông v√†o ch·ªâ ti√™u d∆∞ n·ª£)" 10 "Tri·ªáu VND" 5 && ((success_count++))
create_kpi 14 "Thu d·ªãch v·ª•" 10 "Tri·ªáu VND" 6 && ((success_count++))
create_kpi 14 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 10 "Tri·ªáu VND" 7 && ((success_count++))
create_kpi 14 "ƒêi·ªÅu h√†nh theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 20 "%" 8 && ((success_count++))
create_kpi 14 "BQ k·∫øt qu·∫£ th·ª±c hi·ªán c·ªßa CB trong ph√≤ng" 10 "%" 9 && ((success_count++))

# B·∫¢NG 15: PhogiamdocPgd (ID: 15) - 9 ch·ªâ ti√™u
echo ""
echo "üìã 15. PhogiamdocPgd (9 ch·ªâ ti√™u):"
create_kpi 15 "T·ªïng ngu·ªìn v·ªën BQ" 15 "Tri·ªáu VND" 1 && ((success_count++))
create_kpi 15 "T·ªïng d∆∞ n·ª£ BQ" 15 "Tri·ªáu VND" 2 && ((success_count++))
create_kpi 15 "T·ª∑ l·ªá n·ª£ x·∫•u" 10 "%" 3 && ((success_count++))
create_kpi 15 "Ph√°t tri·ªÉn Kh√°ch h√†ng" 10 "Kh√°ch h√†ng" 4 && ((success_count++))
create_kpi 15 "Thu n·ª£ ƒë√£ XLRR (n·∫øu kh√¥ng c√≥ th√¨ c·ªông v√†o ch·ªâ ti√™u d∆∞ n·ª£)" 10 "Tri·ªáu VND" 5 && ((success_count++))
create_kpi 15 "Thu d·ªãch v·ª•" 10 "Tri·ªáu VND" 6 && ((success_count++))
create_kpi 15 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 10 "Tri·ªáu VND" 7 && ((success_count++))
create_kpi 15 "ƒêi·ªÅu h√†nh theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 20 "%" 8 && ((success_count++))
create_kpi 15 "BQ k·∫øt qu·∫£ th·ª±c hi·ªán c·ªßa CB trong ph√≤ng" 10 "%" 9 && ((success_count++))

# B·∫¢NG 16: PhogiamdocPgdCbtd (ID: 16) - 8 ch·ªâ ti√™u
echo ""
echo "üìã 16. PhogiamdocPgdCbtd (8 ch·ªâ ti√™u):"
create_kpi 16 "T·ªïng d∆∞ n·ª£ BQ" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_kpi 16 "T·ª∑ l·ªá n·ª£ x·∫•u" 10 "%" 2 && ((success_count++))
create_kpi 16 "Ph√°t tri·ªÉn Kh√°ch h√†ng" 10 "Kh√°ch h√†ng" 3 && ((success_count++))
create_kpi 16 "Thu n·ª£ ƒë√£ XLRR (n·∫øu kh√¥ng c√≥ th√¨ c·ªông v√†o ch·ªâ ti√™u d∆∞ n·ª£)" 10 "Tri·ªáu VND" 4 && ((success_count++))
create_kpi 16 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c" 20 "%" 5 && ((success_count++))
create_kpi 16 "T·ªïng ngu·ªìn v·ªën huy ƒë·ªông BQ" 10 "Tri·ªáu VND" 6 && ((success_count++))
create_kpi 16 "Ho√†n th√†nh ch·ªâ ti√™u giao kho√°n SPDV" 10 "%" 7 && ((success_count++))
create_kpi 16 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 8 && ((success_count++))

# B·∫¢NG 17: GiamdocCnl2 (ID: 17) - 11 ch·ªâ ti√™u
echo ""
echo "üìã 17. GiamdocCnl2 (11 ch·ªâ ti√™u):"
create_kpi 17 "T·ªïng ngu·ªìn v·ªën cu·ªëi k·ª≥" 10 "Tri·ªáu VND" 1 && ((success_count++))
create_kpi 17 "T·ªïng ngu·ªìn v·ªën huy ƒë·ªông BQ trong k·ª≥" 10 "Tri·ªáu VND" 2 && ((success_count++))
create_kpi 17 "T·ªïng d∆∞ n·ª£ cu·ªëi k·ª≥" 10 "Tri·ªáu VND" 3 && ((success_count++))
create_kpi 17 "T·ªïng d∆∞ n·ª£ BQ trong k·ª≥" 10 "Tri·ªáu VND" 4 && ((success_count++))
create_kpi 17 "T·ªïng d∆∞ n·ª£ HSX&CN" 10 "Tri·ªáu VND" 5 && ((success_count++))
create_kpi 17 "T·ª∑ l·ªá n·ª£ x·∫•u n·ªôi b·∫£ng" 10 "%" 6 && ((success_count++))
create_kpi 17 "Thu n·ª£ ƒë√£ XLRR" 5 "Tri·ªáu VND" 7 && ((success_count++))
create_kpi 17 "Ph√°t tri·ªÉn Kh√°ch h√†ng" 5 "Kh√°ch h√†ng" 8 && ((success_count++))
create_kpi 17 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 10 "Tri·ªáu VND" 9 && ((success_count++))
create_kpi 17 "Thu d·ªãch v·ª•" 10 "Tri·ªáu VND" 10 && ((success_count++))
create_kpi 17 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, n·ªôi dung ch·ªâ ƒë·∫°o, ƒëi·ªÅu h√†nh c·ªßa CNL1, vƒÉn h√≥a Agribank" 20 "%" 11 && ((success_count++))

# B·∫¢NG 18: PhogiamdocCnl2Td (ID: 18) - 8 ch·ªâ ti√™u
echo ""
echo "üìã 18. PhogiamdocCnl2Td (8 ch·ªâ ti√™u):"
create_kpi 18 "T·ªïng d∆∞ n·ª£ cho vay" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_kpi 18 "T·ªïng d∆∞ n·ª£ cho vay HSX&CN" 15 "Tri·ªáu VND" 2 && ((success_count++))
create_kpi 18 "Thu n·ª£ ƒë√£ x·ª≠ l√Ω" 10 "Tri·ªáu VND" 3 && ((success_count++))
create_kpi 18 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 15 "Tri·ªáu VND" 4 && ((success_count++))
create_kpi 18 "T·ª∑ l·ªá n·ª£ x·∫•u" 10 "%" 5 && ((success_count++))
create_kpi 18 "Ph√°t tri·ªÉn Kh√°ch h√†ng" 10 "Kh√°ch h√†ng" 6 && ((success_count++))
create_kpi 18 "ƒêi·ªÅu h√†nh theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, nhi·ªám v·ª• ƒë∆∞·ª£c giao" 15 "%" 7 && ((success_count++))
create_kpi 18 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 15 "%" 8 && ((success_count++))

# B·∫¢NG 19: PhogiamdocCnl2Kt (ID: 19) - 6 ch·ªâ ti√™u
echo ""
echo "üìã 19. PhogiamdocCnl2Kt (6 ch·ªâ ti√™u):"
create_kpi 19 "T·ªïng ngu·ªìn v·ªën" 25 "Tri·ªáu VND" 1 && ((success_count++))
create_kpi 19 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 20 "Tri·ªáu VND" 2 && ((success_count++))
create_kpi 19 "T·ªïng doanh thu ph√≠ d·ªãch v·ª•" 15 "Tri·ªáu VND" 3 && ((success_count++))
create_kpi 19 "S·ªë th·∫ª ph√°t h√†nh" 10 "c√°i" 4 && ((success_count++))
create_kpi 19 "ƒêi·ªÅu h√†nh theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, nhi·ªám v·ª• ƒë∆∞·ª£c giao" 15 "%" 5 && ((success_count++))
create_kpi 19 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 15 "%" 6 && ((success_count++))

# B·∫¢NG 20: TruongphongKhCnl2 (ID: 20) - 9 ch·ªâ ti√™u
echo ""
echo "üìã 20. TruongphongKhCnl2 (9 ch·ªâ ti√™u):"
create_kpi 20 "T·ªïng d∆∞ n·ª£" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_kpi 20 "T·ª∑ l·ªá n·ª£ x·∫•u" 10 "%" 2 && ((success_count++))
create_kpi 20 "Ph√°t tri·ªÉn Kh√°ch h√†ng" 10 "Kh√°ch h√†ng" 3 && ((success_count++))
create_kpi 20 "Thu n·ª£ ƒë√£ XLRR" 10 "Tri·ªáu VND" 4 && ((success_count++))
create_kpi 20 "ƒêi·ªÅu h√†nh theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c" 15 "%" 5 && ((success_count++))
create_kpi 20 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 6 && ((success_count++))
create_kpi 20 "T·ªïng ngu·ªìn v·ªën huy ƒë·ªông BQ" 10 "Tri·ªáu VND" 7 && ((success_count++))
create_kpi 20 "Ho√†n th√†nh ch·ªâ ti√™u giao kho√°n SPDV" 10 "%" 8 && ((success_count++))
create_kpi 20 "K·∫øt qu·∫£ th·ª±c hi·ªán BQ c·ªßa CB trong ph√≤ng" 5 "%" 9 && ((success_count++))

# B·∫¢NG 21: PhophongKhCnl2 (ID: 21) - 8 ch·ªâ ti√™u
echo ""
echo "üìã 21. PhophongKhCnl2 (8 ch·ªâ ti√™u):"
create_kpi 21 "T·ªïng d∆∞ n·ª£ BQ" 20 "Tri·ªáu VND" 1 && ((success_count++))
create_kpi 21 "T·ª∑ l·ªá n·ª£ x·∫•u" 10 "%" 2 && ((success_count++))
create_kpi 21 "Ph√°t tri·ªÉn Kh√°ch h√†ng" 10 "Kh√°ch h√†ng" 3 && ((success_count++))
create_kpi 21 "Thu n·ª£ ƒë√£ XLRR" 10 "Tri·ªáu VND" 4 && ((success_count++))
create_kpi 21 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c" 20 "%" 5 && ((success_count++))
create_kpi 21 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 10 "%" 6 && ((success_count++))
create_kpi 21 "T·ªïng ngu·ªìn v·ªën huy ƒë·ªông BQ" 10 "Tri·ªáu VND" 7 && ((success_count++))
create_kpi 21 "Ho√†n th√†nh ch·ªâ ti√™u giao kho√°n SPDV" 10 "%" 8 && ((success_count++))

# B·∫¢NG 22: TruongphongKtnqCnl2 (ID: 22) - 6 ch·ªâ ti√™u
echo ""
echo "üìã 22. TruongphongKtnqCnl2 (6 ch·ªâ ti√™u):"
create_kpi 22 "T·ªïng ngu·ªìn v·ªën" 25 "Tri·ªáu VND" 1 && ((success_count++))
create_kpi 22 "L·ª£i nhu·∫≠n kho√°n t√†i ch√≠nh" 20 "Tri·ªáu VND" 2 && ((success_count++))
create_kpi 22 "Thu d·ªãch v·ª• thanh to√°n trong n∆∞·ªõc" 15 "Tri·ªáu VND" 3 && ((success_count++))
create_kpi 22 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c, c√°c c√¥ng vi·ªác theo ch·ª©c nƒÉng nhi·ªám v·ª• c·ªßa ph√≤ng" 20 "%" 4 && ((success_count++))
create_kpi 22 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 15 "%" 5 && ((success_count++))
create_kpi 22 "K·∫øt qu·∫£ th·ª±c hi·ªán BQ c·ªßa CB trong ph√≤ng" 5 "%" 6 && ((success_count++))

# B·∫¢NG 23: PhophongKtnqCnl2 (ID: 23) - 5 ch·ªâ ti√™u
echo ""
echo "üìã 23. PhophongKtnqCnl2 (5 ch·ªâ ti√™u):"
create_kpi 23 "S·ªë b√∫t to√°n giao d·ªãch BQ" 30 "BT" 1 && ((success_count++))
create_kpi 23 "S·ªë b√∫t to√°n h·ªßy" 15 "BT" 2 && ((success_count++))
create_kpi 23 "Th·ª±c hi·ªán nhi·ªám v·ª• theo ch∆∞∆°ng tr√¨nh c√¥ng t√°c" 25 "%" 3 && ((success_count++))
create_kpi 23 "Ch·∫•p h√†nh quy ch·∫ø, quy tr√¨nh nghi·ªáp v·ª•, vƒÉn h√≥a Agribank" 20 "%" 4 && ((success_count++))
create_kpi 23 "Ho√†n th√†nh ch·ªâ ti√™u giao kho√°n SPDV" 10 "%" 5 && ((success_count++))

echo ""
echo "üéâ HO√ÄN TH√ÄNH T·∫†O KPI INDICATORS!"
echo "================================="

# Ki·ªÉm tra k·∫øt qu·∫£ cu·ªëi c√πng
total_indicators=$(curl -s "$API_BASE/KpiIndicators" | jq length 2>/dev/null || echo "0")

echo ""
echo "üìä K·∫æT QU·∫¢ CU·ªêI C√ôNG:"
echo "‚úÖ ƒê√£ t·∫°o th√†nh c√¥ng: $success_count KPI indicators"
echo "üìà T·ªïng KPI trong database: $total_indicators"
echo "üéØ M·ª•c ti√™u: 158 ch·ªâ ti√™u (tr·ª´ TqHkKtnb ch∆∞a c√≥)"

if [[ "$success_count" -ge 150 ]]; then
    echo "üéâ TH√ÄNH C√îNG HO√ÄN TO√ÄN! H·ªá th·ªëng KPI ƒë√£ s·∫µn s√†ng!"
else
    echo "‚ö†Ô∏è  M·ªôt s·ªë ch·ªâ ti√™u ch∆∞a ƒë∆∞·ª£c t·∫°o. Ki·ªÉm tra l·∫°i API ho·∫∑c d·ªØ li·ªáu."
fi

echo ""
echo "üöÄ C√ÅC B∆Ø·ªöC TI·∫æP THEO:"
echo "1. ‚úÖ Ki·ªÉm tra frontend dropdown hi·ªÉn th·ªã ƒë√∫ng t√™n b·∫£ng KPI"
echo "2. üîÑ T·∫°o Employee KPI Assignments"
echo "3. üîÑ T·∫°o Unit KPI Scorings cho chi nh√°nh"
echo "4. üîÑ T·∫°o module frontend 'C·∫•u h√¨nh KPI'"
